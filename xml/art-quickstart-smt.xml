<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>

<article xml:id="art-quickstart-smt" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">

 <info>
  <title>Registering &rhla; &productnumber; or CentOS Linux &productnumber; with &smt;</title>
  <productname>&productname;</productname>
  <productname role="abbrev">&productnameshort;</productname>
  <date><?dbtimestamp format="B d, Y"?></date>
  <xi:include href="common_copyright_gfdl.xml"/>
  <abstract>
   <para>
    Registering with &smt; is no longer supported in &productname; &productnumber; LTSS.
    This guide now contains guidance for migrating from &smt; to &rmt;.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
    <dm:url>https://github.com/SUSE/doc-liberty/issues/new</dm:url>
    <dm:labels>documentation,issue</dm:labels>
    <dm:version>7</dm:version>
    <dm:assignee>tahliar</dm:assignee>
   </dm:bugtracker>
   <dm:editurl>https://github.com/SUSE/doc-liberty/edit/maintenance/SLL7/xml/</dm:editurl>
   <dm:translation>no</dm:translation>
  </dm:docmanager>
  <meta name="description" its:translate="yes">Registering with SMT is no longer supported in &productname; LTSS 7. You can migrate from SMT to RMT.</meta>
  <meta name="social-descr" its:translate="yes">Registering with SMT is not supported. Migrate to RMT.</meta>
  <meta name="task" its:translate="yes">
    <phrase>Upgrade &amp; Update</phrase>
    <phrase>Administration</phrase>
  </meta>
  <revhistory xml:id="rh-art-quickstart">
    <revision>
      <date>2024-07-01</date>
      <revdescription>
        <para>
          Retired this guide for LTSS
        </para>
      </revdescription>
    </revision>
    <revision>
      <date>2024-03-27</date>
      <revdescription>
        <para>
          Clarified wording of requirements
        </para>
      </revdescription>
    </revision>
    <revision>
      <date>2022-04-01</date>
      <revdescription>
        <para>
          Initial release
        </para>
      </revdescription>
    </revision>
  </revhistory>
 </info>

 <section xml:id="liberty-7-ltss">
   <title>End of general support for &productname; &productnumber;</title>
   <warning>
     <title>&smt; is not supported with &productname; &productnumber; LTSS</title>
     <para>
      &productname; &productnumber; has reached the end of general support and is now in LTSS
      (Long Term Service Support).
     </para>
     <para>
       Registering systems with &smt; is not supported under &productname; &productnumber; LTSS.
       You can register &rhla; &productnumber; or CentOS Linux &productnumber; with either
       &smlm; or the &rmtool; (&rmt;).
     </para>
     <para>
       Before you register existing systems with &rmt;, de-register them from &smt;.
       You can do this directly from the &smt; server using the steps in
       <xref linkend="pro-deregister-client-from-smt"/>.
     </para>
     <para>
      To migrate from &smt; to &rmt;, see
      <link xlink:href="https://documentation.suse.com/sles/html/SLES-all/cha-rmt-migrate.html">
      Migrate from SMT to RMT</link> in <citetitle>&rmtguide;</citetitle>.
      Alternatively, install a fresh &rmt; server using the steps in
      <link xlink:href="https://documentation.suse.com/liberty/7/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 7 or CentOS Linux 7 with RMT</citetitle></link>.
     </para>
   </warning>

   <procedure xml:id="pro-deregister-client-from-smt">
     <title>De-registering a client from &smt;</title>
     <step>
       <para>
         List the existing clients and make a note of the client IDs:
       </para>
<screen>&prompt.root;<command>smt-list-registrations</command></screen>
     </step>
     <step>
       <para>
         De-register the clients using their client IDs:
       </para>
<screen>&prompt.root;<command>smt-delete-registration -g <replaceable>CLIENT_ID</replaceable></command></screen>
       <para>
         To de-register multiple clients, you can use the <option>-g</option> option multiple times
         in the same command.
       </para>
     </step>
   </procedure>

   <itemizedlist>
    <title>Related information</title>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/sles-15/html/SLES-all/book-rmt.html">
      <citetitle>&rmtguide;</citetitle></link>
     </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/liberty/7/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 7 or CentOS Linux 7 with RMT</citetitle></link>
     </para>
    </listitem>
    <listitem>
      <para>
        <link xlink:href="https://documentation.suse.com/liberty/7/html/suma-quickstart/art-suma-quickstart.html">
        <citetitle>Registering &rhla; 7 or CentOS Linux 7 with &smlm;</citetitle></link>
      </para>
    </listitem>
    <listitem>
      <para>
        <link xlink:href="https://documentation.suse.com/liberty/7/html/quickstart-scc/art-quickstart-scc.html">
        <citetitle>Registering CentOS Linux &productnumber; with the &scc;</citetitle></link>.
      </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/liberty/8/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 8 or CentOS Linux 8 with RMT</citetitle></link>
     </para>
    </listitem>
    <listitem>
      <para>
        <link xlink:href="https://documentation.suse.com/liberty/8/html/suma-quickstart/art-suma-quickstart.html">
        <citetitle>Registering &rhla; 8 or CentOS Linux 8 with &smlm;</citetitle></link>
      </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/liberty/9/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 9 with RMT</citetitle></link>
     </para>
    </listitem>
    <listitem>
      <para>
        <link xlink:href="https://documentation.suse.com/liberty/9/html/suma-quickstart/art-suma-quickstart.html">
        <citetitle>Registering &rhla; 9 with &smlm;</citetitle></link>
      </para>
    </listitem>
   </itemizedlist>
 </section>

 <!--section xml:id="introduction-quickstart-smt">
  <title>Introduction</title>
   <para>
    &productname; is a technology and support solution for mixed Linux environments.
    With a &productname; subscription, you can register and receive updates for
    &rhel;, CentOS Linux, and &sles;. An optional &ha; extension is also available.
   </para>
   <important role="compact">
    <para>
     CentOS&nbsp;Stream is not supported.
    </para>
   </important>
   <para>
    You can register &rhla; &productnumber; or CentOS Linux &productnumber; with one of the
    following tools:
   </para>
   <itemizedlist>
     <listitem>
       <para>
         &smtool; (&smt;) on &sle; 12
       </para>
     </listitem>
     <listitem>
       <para>
         &rmtool; (&rmt;) on &sle; 15
       </para>
     </listitem>
     <listitem>
       <para>
         &smlm;
       </para>
     </listitem>
   </itemizedlist>
   <para>
    This guide describes how to register with &smt; on &sle; 12. &smt; is a proxy system for the
    &scc;. The &smt; server is registered with the &scc;, and other systems in the network are
    registered with the &smt; server and receive packages from it directly.
   </para>
   <orderedlist>
    <title>Procedure overview</title>
    <listitem>
     <para>
      <xref linkend="requirements-quickstart-smt"/>. Make sure you have everything
      required for the following procedures.
     </para>
    </listitem>
    <listitem>
     <para>
      <xref linkend="configure-smt-server"/>. This server must be installed on
      &sles; 12. You can skip this step if you already have an &smt; server in
      your network.
     </para>
    </listitem>
    <listitem>
     <para>
      <xref linkend="mirror-repositories-with-smt"/>. You can skip this step if
      &productname; is already enabled and mirrored on your &smt; server.
     </para>
    </listitem>
    <listitem>
     <para>
      <xref linkend="register-7-with-smt"/>.
     </para>
    </listitem>
   </orderedlist>
   <note>
    <title><emphasis>&productname;</emphasis> and <emphasis>&sles; with Expanded Support</emphasis></title>
    <para>
     <emphasis>&productname;</emphasis> now provides what used to be covered by
     the <emphasis>&sles; with Expanded Support</emphasis> subscription. Some
     components might still use the <emphasis>Expanded Support</emphasis> name
     during the transition period.
    </para>
   </note>
   <itemizedlist>
    <title>Related information</title>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/sles-12/html/SLES-all/book-smt.html">
      <citetitle>&smtool; Guide</citetitle></link>
     </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/liberty/7/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 7 or CentOS Linux 7 with RMT</citetitle></link>
     </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/liberty/8/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 8 or CentOS Linux 8 with RMT</citetitle></link>
     </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="https://documentation.suse.com/liberty/9/html/quickstart/art-quickstart.html">
      <citetitle>Registering &rhla; 9 with RMT</citetitle></link>
     </para>
    </listitem>
    <listitem>
      <para>
        <link xlink:href="https://documentation.suse.com/suma/en/suse-manager/client-configuration/clients-sleses.html">
        <citetitle>&smlm; Client Configuration Guide: Registering &sliberty; Clients</citetitle></link>
      </para>
    </listitem>
   </itemizedlist>
 </section>

 <section xml:id="requirements-quickstart-smt">
  <title>Requirements</title>
  <itemizedlist>
   <listitem>
    <para>
     You have a &productname; subscription.
    </para>
   </listitem>
   <listitem>
    <para>
     You have a <link xlink:href="&sccurl;">&scc;</link> account.
    </para>
   </listitem>
   <listitem>
    <para>
     The systems you want to register are up to date. &productname; only
     supports the latest minor release of each &rhla; or CentOS Linux version.
    </para>
   </listitem>
   <listitem>
    <para>
     &sles; (&slsa;) 12 is installed and up to date. This machine will be
     the &smt; server. You can use the &productname; subscription to
     register &slsa;. To install &slsa; 12, see
     <link xlink:href="https://documentation.suse.com/sles-12/html/SLES-all/art-sle-installquick.html">
     <citetitle>&instquick;</citetitle></link>.
    </para>
   </listitem>
   <listitem>
     <para>
      The systems you want to register can reach the &smt; server.
     </para>
   </listitem>
   <listitem>
    <para>
     The &smt; server has enough storage available for repository mirroring.
     Downloaded packages are stored in <filename>/srv/www/htdocs/repo</filename>.
     The amount of storage required depends on the number of repositories you mirror.
     We recommend at least 1.5 times the total size of all enabled repositories.
     Be aware that these repositories will grow substantially over time.
    </para>
   </listitem>
  </itemizedlist>
 </section>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="configure-smt-server.xml"/>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="mirror-repositories-with-smt.xml"/>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="register-with-smt.xml"/>

 <section xml:id="troubleshoot-quickstart-smt">
  <title>Troubleshooting</title>
  <variablelist>
   <varlistentry>
    <term>Mirroring completes with errors</term>
    <listitem>
     <para>
      If some packages could not be downloaded because of timeouts, rerun the
      <command>smt-mirror</command> command until all packages are downloaded.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Cannot access the &productname; repository</term>
    <listitem>
     <para>
      The <filename>repodata</filename> directory on the &smt; server will not
      be available until all of the packages for that repository are downloaded.
      If some packages could not be downloaded to the &smt; server because of
      timeouts during the first mirroring, rerun the <command>smt-mirror</command>
      command until all packages are downloaded.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>yum update</command> fails because of package conflicts</term>
    <listitem>
     <para>
      If <package>sles_es-release-server</package> conflicts with existing packages,
      try the following workaround:
     </para>
<screen>&prompt.root;<command>rm -r /usr/share/redhat-release</command></screen>
     <para>
      On CentOS, this removes the symbolic link between
      <filename>redhat-release</filename> and <filename>centos-release</filename>.
     </para>
     <important role="compact">
      <para>
       Make sure you run this command <emphasis>without</emphasis> a <literal>/</literal>
      after <literal>redhat-release</literal>.
      </para>
     </important>
    </listitem>
   </varlistentry>
  </variablelist>
 </section-->
 <xi:include href="common_legal.xml"/>
</article>
