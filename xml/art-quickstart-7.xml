<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook51-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "generic-entities.ent">
    %entities;
]>

<article xml:id="art-quickstart-7" xml:lang="en"
 xmlns="http://docbook.org/ns/docbook" version="5.1"
 xmlns:its="http://www.w3.org/2005/11/its"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink">

 <info>
  <title>Registering &rhla; 7 or CentOS Linux 7</title>
  <productname>&productname;</productname>
  <date><?dbtimestamp format="B d, Y"?></date>
  <xi:include href="common_copyright_gfdl.xml"/>
  <abstract>
   <para>
    This guide describes how to use &productname; to update &rhel;&nbsp;7 or
    CentOS&nbsp;Linux&nbsp;7.
   </para>
  </abstract>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
    <dm:url>https://github.com/SUSE/doc-liberty/issues/new</dm:url>
    <dm:labels>documentation,issue</dm:labels>
    <dm:version>7</dm:version>
    <dm:assignee>tahliar</dm:assignee>
   </dm:bugtracker>
   <dm:editurl>https://github.com/SUSE/doc-liberty/edit/maintenance/SLL7/xml/</dm:editurl>
   <dm:translation>no</dm:translation>
  </dm:docmanager>
 </info>

 <section xml:id="introduction-quickstart-7">
  <title>Introduction</title>
   <para>
    &productname; is a technology and support solution for mixed Linux environments.
    With a &productname; subscription, you can register and receive updates for
    &rhel;, CentOS Linux, and &sles;. An optional &ha; extension is also available.
   </para>
   <important role="compact">
    <para>
     CentOS&nbsp;Stream is not supported.
    </para>
   </important>
   <para>
    To register &rhla; 7 or CentOS Linux 7, use &suse;'s &smtool; (&smt;) for &sle; 12.
    &smt; is a proxy system for the &scc;. The &smt; server is registered with
    the &scc;, and other systems in the network are registered with the &smt;
    server and receive packages from it directly.
   </para>
   <important role="compact">
    <para>
     The &rmtool; (&rmt;) for &sle; 15 does not support &rhla;/CentOS 7 registration.
    </para>
   </important>
   <para>
    Registering &rhla; or CentOS Linux with &smt; involves the following steps:
   </para>
   <orderedlist>
    <listitem>
     <para>
      <xref linkend="requirements-quickstart-7"/>. Make sure you have everything
      required for the following procedures.
     </para>
    </listitem>
    <listitem>
     <para>
      <xref linkend="configure-smt-server"/>. This server must be installed on
      &sles; 12. You can skip this step if you already have an &smt; server in
      your network.
     </para>
    </listitem>
    <listitem>
     <para>
      <xref linkend="mirror-repositories-with-smt"/>. You can skip this step if
      &productname; is already enabled and mirrored on your &smt; server.
     </para>
    </listitem>
    <listitem>
     <para>
      <xref linkend="register-7-with-smt"/>.
     </para>
    </listitem>
   </orderedlist>
   <!-- Can delete this if/when all names have been changed-->
   <note>
    <title><emphasis>&productname;</emphasis> and <emphasis>&sles; with Expanded Support</emphasis></title>
    <para>
     <emphasis>&productname;</emphasis> now provides what used to be covered by
     the <emphasis>&sles; with Expanded Support</emphasis> subscription. Some
     components might still use the <emphasis>Expanded Support</emphasis> name
     during the transition period.
    </para>
   </note>
   <itemizedlist>
    <title>Related information</title>
    <listitem>
     <para>
      <link xlink:href="&dsc-sles;-12/html/SLES-all/book-smt.html">
      <citetitle>&smtool; Guide</citetitle></link>
     </para>
    </listitem>
    <listitem>
     <para>
      <link xlink:href="&dsc;/liberty/8/html/quickstart-8/art-quickstart-8.html">
      <citetitle>Registering &rhla; 8 or CentOS Linux 8</citetitle></link>
     </para>
    </listitem>
   </itemizedlist>
 </section>

 <section xml:id="requirements-quickstart-7">
  <title>Requirements</title>
  <itemizedlist>
   <listitem>
    <para>
     You have a &productname; subscription.
    </para>
   </listitem>
   <listitem>
    <para>
     You have a <link xlink:href="https://scc.suse.com">&scc;</link> account.
    </para>
   </listitem>
   <listitem>
    <para>
     The systems you want to register have been updated to the latest version of
     &rhla; 7 or CentOS Linux 7.
    </para>
   </listitem>
   <listitem>
    <para>
     &sles; (&slsa;) 12 is installed and running in the same network as the
     systems you want to register. You can use the &productname; subscription to
     register this server. To install the latest version of &slsa; 12, see the
     <link xlink:href="&dsc-sles;-12/html/SLES-all/art-sle-installquick.html">
     &instquick;</link>.
    </para>
   </listitem>
   <listitem>
    <para>
     The &slsa; 12 server has enough storage available for repository mirroring.
     Downloaded packages are stored in <filename>/srv/www/htdocs/repo</filename>.
     The amount of storage required depends on the number of repositories that you mirror.
    </para>
    <para>
     We recommend at least 1.5 times the total size of all enabled repositories.
     For &rhla; 7 or CentOS Linux 7, this means approximately 565&nbsp;GB for
     the default repositories, and an additional 180&nbsp;GB if you need the
     <literal>src</literal> repositories. However, be aware that these repositories
     will grow over time.
    </para>
   </listitem>
  </itemizedlist>
 </section>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="configure-smt-server.xml"/>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="mirror-repositories-with-smt.xml"/>

<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="register-rhel-with-smt.xml"/>

 <section xml:id="troubleshoot-quickstart-7">
  <title>Troubleshooting</title>
  <variablelist>
   <varlistentry>
    <term>Mirroring completes with errors</term>
    <listitem>
     <para>
      If some packages could not be downloaded because of timeouts, rerun the
      <command>smt-mirror</command> command until all packages are downloaded.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term>Cannot access the &productname; repository</term>
    <listitem>
     <para>
      The <filename>repodata</filename> directory on the &smt; server will not
      be available until all of the packages for that repository are downloaded.
      If some packages could not be downloaded to the &smt; server because of
      timeouts during the first mirroring, rerun the <command>smt-mirror</command>
      command until all packages are downloaded.
     </para>
    </listitem>
   </varlistentry>
   <varlistentry>
    <term><command>yum update</command> fails because of package conflicts</term>
    <listitem>
     <para>
      If <package>sles_es-release-server</package> conflicts with existing packages,
      try the following workaround:
     </para>
<screen>&prompt.root;<command>rm -r /usr/share/redhat-release</command></screen>
     <para>
      On CentOS, this removes the symbolic link between
      <filename>redhat-release</filename> and <filename>centos-release</filename>.
     </para>
     <important role="compact">
      <para>
       Make sure you run this command <emphasis>without</emphasis> a <literal>/</literal>
      after <literal>redhat-release</literal>.
      </para>
     </important>
    </listitem>
   </varlistentry>
  </variablelist>
 </section>
 <xi:include href="common_legal.xml"/>
</article>
